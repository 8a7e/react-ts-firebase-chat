{"version":3,"sources":["API/index.ts","layouts/main/index.tsx","components/login/index.tsx","components/chat/message/index.tsx","components/chat/index.tsx","routes.ts","App.tsx","index.tsx"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","messages","collection","firebaseAPI","store","auth","getAuth","login","provider","GoogleAuthProvider","signInWithPopup","err","console","error","logout","signOut","sendMessage","user","message","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","MainLayout","children","loading","Box","sx","flexGrow","AppBar","position","Toolbar","display","justifyContent","Typography","variant","component","cursor","alignItems","p","borderRight","height","Avatar","src","ml","Button","onClick","color","width","LinearProgress","Container","maxWidth","mb","Grid","container","minHeight","Login","alignSelf","textAlign","type","fullWidth","useStyles","makeStyles","messageSent","borderRadius","marginTop","marginRight","minWidth","padding","boxShadow","flexDirection","background","messageReceived","wordWrap","time","opacity","messageBody","overflowyY","Message","messageRef","createRef","classes","useState","isCurrent","setCurrent","ctx","useContext","Context","scrollSmoothHandler","useCallback","current","scrollIntoView","behavior","useEffect","className","ref","gutterBottom","toDate","toDateString","toLocaleTimeString","Chat","publicRoutes","path","Component","useCollectionData","orderBy","setMessage","Paper","my","xs","maxHeight","overflow","CircularProgress","map","toString","pl","pr","TextField","value","onChange","e","currentTarget","label","multiline","maxRows","mt","startIcon","privateRoutes","createContext","App","useAuthState","Provider","CssBaseline","exact","to","Snackbar","open","autoHideDuration","Alert","severity","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3449e2c0.chunk.js","sourcesContent":["import firebase from \"firebase/compat/app\";\nimport { getAuth } from \"firebase/auth\";\n\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBOSHZiq5FtDl7Bb3P45lur6IQJtzbxx3Q\",\n  authDomain: \"chat-react-4c8b6.firebaseapp.com\",\n  projectId: \"chat-react-4c8b6\",\n  storageBucket: \"chat-react-4c8b6.appspot.com\",\n  messagingSenderId: \"64897910078\",\n  appId: \"1:64897910078:web:dd55c37d9351cfd3b1d86f\",\n  measurementId: \"G-1HVNTT3529\",\n};\n\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\nconst firestore = firebase.firestore();\nconst messages = firestore.collection(\"messages\");\n\nexport const firebaseAPI = {\n  store: firestore,\n  auth: getAuth(firebaseApp),\n  messages: messages,\n  login: () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    try {\n      firebase.auth().signInWithPopup(provider);\n    } catch (err) {\n      console.error(err);\n    }\n  },\n  logout: () => {\n    try {\n      firebase.auth().signOut();\n    } catch (err) {\n      console.error(err);\n    }\n  },\n  sendMessage: (user: any, message: string) => {\n    try {\n      messages.add({\n        uid: user.uid,\n        displayName: user.displayName,\n        photoURL: user.photoURL,\n        text: message,\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  },\n};\n","import { FC } from \"react\";\n\nimport {\n  AppBar,\n  Toolbar,\n  Box,\n  Typography,\n  Grid,\n  Button,\n  Container,\n  LinearProgress,\n  Avatar,\n} from \"@mui/material\";\n\nimport { firebaseAPI } from \"../../API\";\nimport { UserType } from \"../../types\";\n\nconst MainLayout: FC<Props> = ({ children, user, loading }) => {\n  return (\n    <>\n      <Box sx={{ flexGrow: 1 }}>\n        <AppBar position=\"static\">\n          <Toolbar sx={{ display: \"flex\", justifyContent: \"space-between\" }}>\n            <Typography variant=\"h6\" component=\"div\">\n              React Firebase Chat\n            </Typography>\n            {user ? (\n              <Box\n                sx={{ cursor: \"pointer\" }}\n                display=\"flex\"\n                alignItems=\"center\"\n                justifyContent={\"space-between\"}\n              >\n                <Box\n                  p={1}\n                  display=\"flex\"\n                  alignItems=\"center\"\n                  borderRight={1}\n                  height={\"10px\"}\n                >\n                  <Avatar src={user.photoURL} />\n                  <Typography ml={1}>{user.displayName}</Typography>\n                </Box>\n                <Button onClick={firebaseAPI.logout} color=\"inherit\">\n                  Logout\n                </Button>\n              </Box>\n            ) : (\n              <Button onClick={firebaseAPI.login} color=\"inherit\">\n                Login\n              </Button>\n            )}\n          </Toolbar>\n        </AppBar>\n        {loading && (\n          <Box sx={{ width: \"100%\" }}>\n            <LinearProgress />\n          </Box>\n        )}\n      </Box>\n      <Container component=\"main\" maxWidth=\"sm\" sx={{ mb: 4 }}>\n        <Grid container minHeight={\"80vh\"}>\n          {children}\n        </Grid>\n      </Container>\n    </>\n  );\n};\n\ninterface Props {\n  children: React.ReactNode;\n  user: UserType;\n  loading: boolean;\n}\n\nexport default MainLayout;\n","import { Button, Grid, Typography } from \"@mui/material\";\n\nimport { firebaseAPI } from \"../../API\";\n\nfunction Login() {\n  return (\n    <Grid container alignSelf={\"center\"} justifyContent={\"center\"}>\n      <Typography variant=\"h6\" component=\"div\" textAlign=\"center\">\n        Сlick on the login button to access the chat\n      </Typography>\n      <Button\n        onClick={firebaseAPI.login}\n        type=\"submit\"\n        fullWidth\n        variant=\"contained\"\n        color=\"primary\"\n      >\n        Login\n      </Button>\n    </Grid>\n  );\n}\nexport default Login;\n","import {\n  createRef,\n  FC,\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from \"react\";\n\nimport { Box, Typography, Avatar } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\n\nimport { MessageType } from \"../../../types\";\nimport { Context } from \"../../../App\";\n\nconst useStyles = makeStyles({\n  messageSent: {\n    borderRadius: \"20px 20px 0 20px\",\n    marginTop: 10,\n    marginRight: 10,\n    minWidth: \"50%\",\n    maxWidth: \"50%\",\n    padding: 15,\n    display: \"flex\",\n    boxShadow: \"5px 5px 10px -5px rgba(34, 60, 80, 0.6)\",\n    flexDirection: \"column\",\n    background: \"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)\",\n    alignSelf: \"flex-end\",\n    color: \"#f2f2f2\",\n  },\n  messageReceived: {\n    borderRadius: \"20px 20px 0 20px\",\n    marginTop: 10,\n    minWidth: \"50%\",\n    maxWidth: \"50%\",\n    padding: 15,\n    display: \"flex\",\n    boxShadow: \"5px 5px 10px -5px rgba(34, 60, 80, 0.6)\",\n    flexDirection: \"column\",\n    wordWrap: \"break-word\",\n    background: \"linear-gradient(45deg, #e6e6e6 30%, #e6e6e6 90%)\",\n    color: \"#1a1a1a\",\n  },\n  time: {\n    marginTop: \"10px\",\n    opacity: 0.5,\n  },\n  messageBody: {\n    wordWrap: \"break-word\",\n    overflowyY: \"auto\",\n    width: \"100%\",\n  },\n});\n\nconst Message: FC<Props> = ({ message }) => {\n  const messageRef: React.RefObject<HTMLDivElement> = createRef();\n  const classes = useStyles();\n  const [isCurrent, setCurrent] = useState(false);\n  const ctx = useContext(Context);\n\n  const scrollSmoothHandler = useCallback(() => {\n    if (messageRef.current) {\n      messageRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n    if (ctx.user.displayName === message.displayName) setCurrent(true);\n  }, [ctx.user, message, messageRef]);\n\n  useEffect(() => {\n    scrollSmoothHandler();\n  }, [scrollSmoothHandler]);\n\n  return (\n    <>\n      <Box display=\"flex\" flexDirection=\"column\">\n        <Box\n          className={isCurrent ? classes.messageSent : classes.messageReceived}\n          ref={messageRef}\n        >\n          <Avatar src={message.photoURL} />\n          <Typography variant=\"h6\">{message.displayName}</Typography>\n          <Typography className={classes.messageBody} variant=\"body1\">\n            {message.text}\n          </Typography>\n          <Box>\n            <Typography\n              component=\"div\"\n              className={classes.time}\n              variant=\"caption\"\n              display=\"block\"\n              gutterBottom\n            >\n              {`${message.createdAt.toDate().toDateString()} \n              ${message.createdAt.toDate().toLocaleTimeString()}`}\n            </Typography>\n          </Box>\n        </Box>\n      </Box>\n    </>\n  );\n};\n\nexport default Message;\n\ninterface Props {\n  message: MessageType;\n}\n","import { useContext, useState } from \"react\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\n\nimport {\n  Button,\n  TextField,\n  Paper,\n  Box,\n  Container,\n  CircularProgress,\n} from \"@mui/material\";\nimport SendIcon from \"@mui/icons-material/Send\";\n\nimport { firebaseAPI } from \"../../API\";\nimport { Context } from \"../../App\";\n\nimport Message from \"./message\";\n\nfunction Chat() {\n  const ctx = useContext(Context);\n\n  const [messages, loading] = useCollectionData(\n    firebaseAPI.messages.orderBy(\"createdAt\")\n  );\n\n  const [message, setMessage] = useState(\"\");\n\n  const sendMessage = () => {\n    message && firebaseAPI.sendMessage(ctx.user, message);\n    setMessage(\"\");\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\" sx={{ mb: 4 }}>\n      <Paper variant=\"outlined\" sx={{ my: { xs: 1 }, height: \"82vh\" }}>\n        <Box sx={{ maxHeight: \"85%\", overflow: \"auto\", p: 1 }}>\n          {loading && <CircularProgress />}\n          {messages?.map(\n            (message) =>\n              message.createdAt && (\n                <Message key={message.createdAt.toString()} message={message} />\n              )\n          )}\n        </Box>\n        <Box sx={{ pl: 1, pr: 1 }}>\n          <TextField\n            value={message}\n            onChange={(e) => setMessage(e.currentTarget.value)}\n            label=\"Message\"\n            variant=\"outlined\"\n            multiline\n            maxRows={2}\n            fullWidth\n          />\n          <Button\n            sx={{ mt: 1 }}\n            fullWidth\n            variant=\"contained\"\n            startIcon={<SendIcon />}\n            onClick={sendMessage}\n          >\n            Send\n          </Button>\n        </Box>\n      </Paper>\n    </Container>\n  );\n}\nexport default Chat;\n","import Login from \"./components/login\";\nimport Chat from \"./components/chat\";\n\nexport const publicRoutes = [\n  {\n    path: \"/\",\n    Component: Chat,\n  },\n];\n\nexport const privateRoutes = [\n  {\n    path: \"/\",\n    Component: Login,\n  },\n];\n","import { createContext } from \"react\";\nimport { BrowserRouter, Switch, Route, Redirect } from \"react-router-dom\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\n\nimport { Alert, Snackbar } from \"@mui/material\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\n\nimport MainLayout from \"./layouts/main\";\n\nimport { firebaseAPI } from \"./API\";\nimport { publicRoutes, privateRoutes } from \"./routes\";\n\nimport { UserType } from \"./types\";\n\ninterface ContextType {\n  user: UserType;\n}\n\nexport const Context = createContext({} as ContextType);\n\nfunction App() {\n  const [user, loading, error] = useAuthState(firebaseAPI.auth);\n\n  return (\n    <div>\n      <Context.Provider value={{ user }}>\n        <CssBaseline />\n        <BrowserRouter>\n          <MainLayout user={user} loading={loading}>\n            {user ? (\n              <Switch>\n                {publicRoutes.map(({ path, Component }) => (\n                  <Route\n                    key={path}\n                    path={path}\n                    component={Component}\n                    exact={true}\n                  />\n                ))}\n                <Redirect to={\"/\"} />\n              </Switch>\n            ) : (\n              <Switch>\n                {privateRoutes.map(({ path, Component }) => (\n                  <Route\n                    key={path}\n                    path={path}\n                    component={Component}\n                    exact={true}\n                  />\n                ))}\n                <Redirect to={\"/\"} />\n              </Switch>\n            )}\n          </MainLayout>\n          <Snackbar open={error} autoHideDuration={5000}>\n            <Alert severity=\"error\" sx={{ width: \"100%\" }}>\n              An error has occurred, please try again.\n            </Alert>\n          </Snackbar>\n        </BrowserRouter>\n      </Context.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","import ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <>\n    <App />\n  </>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}
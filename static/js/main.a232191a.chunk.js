(this["webpackJsonpreact-ts-firebase-chat"]=this["webpackJsonpreact-ts-firebase-chat"]||[]).push([[0],{146:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(58),i=a.n(r),s=a(22),o=a(110),d=a(30),l=a(104),j=a(202),x=a(200),h=a(197),b=a(206),p=a(207),u=a(209),m=a(210),O=a(204),g=a(211),f=a(212),v=a(213),y=a(205),w=a(62),C=a(111),S=(a(129),a(147),w.a.initializeApp({apiKey:"AIzaSyBOSHZiq5FtDl7Bb3P45lur6IQJtzbxx3Q",authDomain:"chat-react-4c8b6.firebaseapp.com",projectId:"chat-react-4c8b6",storageBucket:"chat-react-4c8b6.appspot.com",messagingSenderId:"64897910078",appId:"1:64897910078:web:dd55c37d9351cfd3b1d86f",measurementId:"G-1HVNTT3529"})),k=w.a.firestore(),R=k.collection("messages"),I={store:k,auth:Object(C.a)(S),messages:R,login:function(){var e=new w.a.auth.GoogleAuthProvider;try{w.a.auth().signInWithPopup(e)}catch(t){console.error(t)}},logout:function(){try{w.a.auth().signOut()}catch(e){console.error(e)}},sendMessage:function(e,t){try{R.add({uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,text:t,createdAt:w.a.firestore.FieldValue.serverTimestamp()})}catch(a){console.error(a)}}},W=a(5),A=function(e){var t=e.children,a=e.user,c=e.loading;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(b.a,{sx:{flexGrow:1},children:[Object(W.jsx)(p.a,{position:"static",children:Object(W.jsxs)(u.a,{sx:{display:"flex",justifyContent:"space-between"},children:[Object(W.jsx)(m.a,{variant:"h6",component:"div",children:"React Firebase Chat"}),a?Object(W.jsxs)(b.a,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",justifyContent:"space-between",children:[Object(W.jsxs)(b.a,{p:1,display:"flex",alignItems:"center",borderRight:1,height:"10px",children:[Object(W.jsx)(O.a,{src:a.photoURL}),Object(W.jsx)(m.a,{ml:1,children:a.displayName})]}),Object(W.jsx)(g.a,{onClick:I.logout,color:"inherit",children:"Logout"})]}):Object(W.jsx)(g.a,{onClick:I.login,color:"inherit",children:"Login"})]})}),c&&Object(W.jsx)(b.a,{sx:{width:"100%"},children:Object(W.jsx)(f.a,{})})]}),Object(W.jsx)(v.a,{component:"main",maxWidth:"sm",sx:{mb:4},children:Object(W.jsx)(y.a,{container:!0,minHeight:"80vh",children:t})})]})};var N=function(){return Object(W.jsxs)(y.a,{container:!0,alignSelf:"center",justifyContent:"center",children:[Object(W.jsx)(m.a,{variant:"h6",component:"div",textAlign:"center",children:"\u0421lick on the login button to access the chat"}),Object(W.jsx)(g.a,{onClick:I.login,type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Login"})]})},B=a(106),D=a(208),L=a(214),T=a(198),F=a(107),H=a.n(F),M=a(199),P=Object(M.a)({messageSent:{borderRadius:"20px 20px 0 20px",marginTop:10,marginRight:10,minWidth:"50%",maxWidth:"50%",padding:15,display:"flex",boxShadow:"5px 5px 10px -5px rgba(34, 60, 80, 0.6)",flexDirection:"column",background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",alignSelf:"flex-end",color:"#f2f2f2"},messageReceived:{borderRadius:"20px 20px 0 20px",marginTop:10,minWidth:"50%",maxWidth:"50%",padding:15,display:"flex",boxShadow:"5px 5px 10px -5px rgba(34, 60, 80, 0.6)",flexDirection:"column",wordWrap:"break-word",background:"linear-gradient(45deg, #e6e6e6 30%, #e6e6e6 90%)",color:"#1a1a1a"},time:{marginTop:"10px",opacity:.5},messageBody:{wordWrap:"break-word",overflowyY:"auto",width:"100%"}}),U=function(e){var t=e.message,a=Object(c.createRef)(),n=P(),r=Object(c.useState)(!1),i=Object(s.a)(r,2),o=i[0],d=i[1],l=Object(c.useContext)(J),j=Object(c.useCallback)((function(){a.current&&a.current.scrollIntoView({behavior:"smooth"}),l.user.displayName===t.displayName&&d(!0)}),[l.user,t,a]);return Object(c.useEffect)((function(){j()}),[j]),Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(b.a,{display:"flex",flexDirection:"column",children:Object(W.jsxs)(b.a,{className:o?n.messageSent:n.messageReceived,ref:a,children:[Object(W.jsx)(O.a,{src:t.photoURL}),Object(W.jsx)(m.a,{variant:"h6",children:t.displayName}),Object(W.jsx)(m.a,{className:n.messageBody,variant:"body1",children:t.text}),Object(W.jsx)(b.a,{children:Object(W.jsx)(m.a,{component:"div",className:n.time,variant:"caption",display:"block",gutterBottom:!0,children:t.createdAt&&"".concat(t.createdAt.toDate().toDateString()," \n              ").concat(t.createdAt.toDate().toLocaleTimeString())})})]})})})};var z=[{path:"/",Component:function(){var e=Object(c.useContext)(J),t=Object(B.a)(I.messages.orderBy("createdAt")),a=Object(s.a)(t,2),n=a[0],r=a[1],i=Object(c.useState)(""),o=Object(s.a)(i,2),d=o[0],l=o[1];return Object(W.jsx)(v.a,{component:"main",maxWidth:"sm",sx:{mb:4},children:Object(W.jsxs)(D.a,{variant:"outlined",sx:{my:{xs:1},height:"82vh"},children:[Object(W.jsxs)(b.a,{sx:{maxHeight:"85%",overflow:"auto",p:1},children:[r&&Object(W.jsx)(L.a,{}),null===n||void 0===n?void 0:n.map((function(e){return Object(W.jsx)(U,{message:e},e.createdAt.toString())}))]}),Object(W.jsxs)(b.a,{sx:{pl:1,pr:1},children:[Object(W.jsx)(T.a,{value:d,onChange:function(e){return l(e.currentTarget.value)},label:"Message",variant:"outlined",multiline:!0,maxRows:2,fullWidth:!0}),Object(W.jsx)(g.a,{sx:{mt:1},fullWidth:!0,variant:"contained",startIcon:Object(W.jsx)(H.a,{}),onClick:function(){d&&I.sendMessage(e.user,d),l("")},children:"Send"})]})]})})}}],G=[{path:"/",Component:N}],J=Object(c.createContext)({});var V=function(){var e=Object(l.a)(I.auth),t=Object(s.a)(e,3),a=t[0],c=t[1],n=t[2];return Object(W.jsx)("div",{children:Object(W.jsxs)(J.Provider,{value:{user:a},children:[Object(W.jsx)(h.a,{}),Object(W.jsxs)(o.a,{children:[Object(W.jsx)(A,{user:a,loading:c,children:a?Object(W.jsxs)(d.d,{children:[z.map((function(e){var t=e.path,a=e.Component;return Object(W.jsx)(d.b,{path:t,component:a,exact:!0},t)})),Object(W.jsx)(d.a,{to:"/"})]}):Object(W.jsxs)(d.d,{children:[G.map((function(e){var t=e.path,a=e.Component;return Object(W.jsx)(d.b,{path:t,component:a,exact:!0},t)})),Object(W.jsx)(d.a,{to:"/"})]})}),Object(W.jsx)(j.a,{open:n,autoHideDuration:5e3,children:Object(W.jsx)(x.a,{severity:"error",sx:{width:"100%"},children:"An error has occurred, please try again."})})]})]})})};i.a.render(Object(W.jsx)(n.a.StrictMode,{children:Object(W.jsx)(V,{})}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.a232191a.chunk.js.map